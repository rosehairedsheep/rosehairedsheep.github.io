---
import '../styles/_global.css'

import type { MarkdownInstance } from 'astro';
interface Frontmatter {
    url: string;
	title: string;
	pub_date: string;
	image: [key: string, value: string];
    description: string;
	contribution: string;
	tags: [key: string, value: string[]]
}

import Base from '../layouts/base.astro'
import Content from '../components/content.astro'
import PostPreview from '../components/posts/preview.astro'

const page_title = "projects"
const all_projects = Object.values(import.meta.glob<MarkdownInstance<Frontmatter>>('./projects/*.{md,mdx}', { eager: true }));
---

<Base page_title={page_title}>
	<Content>
		{all_projects.sort((a, b) => Date.parse(b.frontmatter.pub_date) - Date.parse(a.frontmatter.pub_date)).map((project: any) => <PostPreview
		url={project.url}
		name={project.frontmatter.title}
		pub_date={project.frontmatter.pub_date}
		image={project.frontmatter.image}
		desc={project.frontmatter.description}
		cont={project.frontmatter.contribution}
		tags={project.frontmatter.tags} />)}
	</Content>
</Base>
